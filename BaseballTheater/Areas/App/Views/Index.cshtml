@using System.Web.Optimization

@{
	Layout = "~/Shared/Views/_Layout.cshtml";
	ViewBag.BodyClass += " GameList ";
}

@{ 
	Html.RenderPartial("Templates/_GameSummary");
	Html.RenderPartial("Templates/_Highlight");
	Html.RenderPartial("Templates/_Backers");
	Html.RenderPartial("Templates/_BoxScore");
}

<div class="settings flex" v-if="showingGameList">
	<div class="day-nav">
		<a v-bind:href="getUrlDayBefore(date)">
			<i class="fa fa-chevron-circle-left"></i>
		</a>
		<input type="text" id="calendarpicker" v-bind:value="getFriendlyDate(date)" v-bind:size="getFriendlyDate(date).length + 1" />
		<i class="fa fa-calendar" aria-hidden="true"></i>
		<a v-bind:href="getUrlDayAfter(date)">
			<i class="fa fa-chevron-circle-right"></i>
		</a>
	</div>

	<div class="tools flex">
		<select id="favorite-team" v-on:change="setFavoriteTeam">
			<option>- Select Favorite Team -</option>
			
			<option v-for="(teamName, teamCode) in teams" v-bind:value="teamCode" v-bind:selected="isFavoriteTeam(teamCode)">{{teamName}}</option>
		</select>
		<div class="hide-scores">
			<input type="checkbox" id="scoreshidden" v-on:change="onChangeHideScores" v-bind:checked="hideScores" />
			<label for="scoreshidden">Hide Scores</label>
		</div>
	</div>
</div>


<div class="game-list">
	<template v-if="gameSummaries && gameSummaries.length > 0">
		<game-summary-simple v-for="game in gameSummaries" v-bind:game="game">

		</game-summary-simple>
	</template>
	<template v-else-if="showNoGames()">
		<div class="empty">
			No games found for this day
		</div>
	</template>
</div>


<div class="highlights">
	<div class="highlight-game-summary" v-if="gameSummary">

		<div class="team away">
			<a class="team-logo-large home-logo" v-if="gameSummary" v-bind:class="gameSummary.away_file_code" href="/backers"></a>
			<a class="backers" href="/backers">
				{{getTeamSponsors(gameSummary.away_file_code)}}
			</a>
		</div>

		<game-summary v-if="gameSummary" v-bind:game="gameSummary"></game-summary>

		<div class="team home">
			<a class="team-logo-large away-logo" v-if="gameSummary" v-bind:class="gameSummary.home_file_code" href="/backers"></a>
			<a class="backers" href="/backers">
				{{getTeamSponsors(gameSummary.home_file_code)}}
			</a>
		</div>

	</div>
	
	<div v-if="boxScore && highlights" class="mode-switch-container">
		<div class="mode-switch">
			<div class="switch-item" v-on:click="detailMode = 0" v-bind:class="{ on: detailMode === 0}">
				Highlights
			</div>
			<div class="switch-item" v-on:click="detailMode = 1" v-bind:class="{ on: detailMode === 1}">
				Box Score
			</div>
		</div>
	</div>
	
	<template v-if="boxScore && detailMode === 1">
		<boxscore v-bind:box-score="boxScore"></boxscore>
	</template>

	<template v-if="highlights && highlights.length > 0 && detailMode === 0">
		<highlight v-for="highlight in highlights" v-bind:highlight="highlight">

		</highlight>
	</template>

	<template v-else-if="showNoHighlights() && detailMode === 0">
		<div class="empty">
			No highlights found for this game. Highlights for some games may not be published until the game is complete.
		</div>
	</template>
</div>

<div class="backers-wrapper">
	<template v-if="showBackers">
		<div class="premium-sponsors">
			<h1>
				<span>Premium Sponsors</span>

				<a class="become" href="https://www.patreon.com/bePatron?u=5206592" target="_blank">
					Become a premium sponsor
				</a>
			</h1>
			<div class="backers">
				<premium-sponsor v-for="premiumSponsor in premiumSponsors" v-bind:premium-sponsor="premiumSponsor"></premium-sponsor>
			</div>
			<span v-if="premiumSponsors.length === 0">
				No backers yet.
			</span>
		</div>
		<div class="team-sponsors">
			<h1>
				<span>Fans</span>
				
				<a class="become" href="https://www.patreon.com/bePatron?u=5206592" target="_blank">
					Become a fan backer
				</a>
			</h1>
			
			<team-sponsor v-for="teamSponsor in teamSponsors" v-bind:team-sponsor-team="teamSponsor"></team-sponsor>

			<span v-if="Object.keys(teamSponsors).length === 0">
				No premium backers yet.
			</span>
		</div>
	</template>
</div>